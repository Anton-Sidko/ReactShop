{"version":3,"sources":["components/Header.jsx","config.js","reducer.js","context.js","components/Preloader.jsx","components/GoodsItem.jsx","components/GoodsList.jsx","components/Cart.jsx","components/CartItem.jsx","components/CartList.jsx","components/Alert.jsx","components/Main.jsx","components/Footer.jsx","App.js","index.js"],"names":["Header","className","href","id","reducer","state","type","payload","goods","loading","itemIndex","order","findIndex","orderItem","newOrder","newItem","quantity","map","index","alertName","name","isCartShow","filter","el","newQuantity","n","ShopContext","createContext","initialState","ContextProvider","children","useReducer","value","dispatch","closeAlert","removeFromCart","itemId","handleCartShow","addToCart","item","changeQuantityItem","setGoods","data","Provider","Preloader","GoodsItem","props","mainId","displayName","description","displayDescription","price","regularPrice","preview","displayAssets","full_background","useContext","src","alt","onClick","GoodsList","length","slice","Cart","Function","prototype","CartItem","CartList","totalPrice","reduce","sum","Alert","useEffect","timerId","setTimeout","clearTimeout","Main","fetch","headers","Authorization","process","then","response","json","shop","document","querySelector","body","style","overflow","webkitFilter","Footer","Date","getFullYear","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.30166a12.chunk.js","sourcesContent":["function Header() {\n    return <nav className=\"indigo lighten-2\">\n        <div className=\"nav-wrapper\">\n            <a href=\"/\" className=\"brand-logo\">React Shop</a>\n            <ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\n                <li><a href=\"https://github.com/Anton-Sidko/ReactShop\">Repo</a></li>\n            </ul>\n        </div>\n    </nav>\n}\n\nexport {Header}","const API_KEY = process.env.REACT_APP_API_KEY;\n\nconst API_URL = ' https://fortniteapi.io/v2/shop?lang=ru';\n\n\nexport {\n    API_KEY,\n    API_URL\n}","export function reducer(state, {type, payload}) {\n    switch (type) {\n        case 'SET_GOODS':\n            return {\n                ...state,\n                goods: payload || [],\n                loading: false\n            }\n\n        case 'ADD_TO_CART': {\n            const itemIndex = state.order.findIndex(orderItem => orderItem.id === payload.id);\n\n            let newOrder = null;\n\n            if (itemIndex < 0) {\n                const newItem = {\n                    ...payload,\n                    quantity: 1,\n                };\n                newOrder = [...state.order, newItem];\n            } else {\n                newOrder = state.order.map((orderItem, index) => {\n                    if (index === itemIndex) {\n                        return {\n                            ...orderItem,\n                            quantity: orderItem.quantity + 1\n                        }\n                    } else {\n                        return orderItem;\n                    }\n                })\n            }\n\n            return {\n                ...state,\n                order: newOrder,\n                alertName: payload.name\n            }\n        }\n\n        case 'TOGGLE_CART_SHOW':\n            return {\n                ...state,\n                isCartShow: !state.isCartShow\n            }\n\n        case 'REMOVE_FROM_CART':\n            return {\n                ...state,\n                order: state.order.filter(el => el.id !== payload.id)\n            }\n\n        case 'CLOSE_ALERT':\n            return {\n                ...state,\n                alertName: ''\n            }\n\n        case 'CHANGE_QUANTITY_ITEM': {\n            return {\n                ...state,\n                order: state.order.map(el => {\n                    if (el.id === payload.id) {\n                        const newQuantity = el.quantity + payload.n;\n                        return {\n                            ...el,\n                            quantity: newQuantity > 0 ? newQuantity : 0\n                        }\n                    } else {\n                        return el;\n                    }\n                })\n            }\n        }\n\n        default:\n            return state;\n    }\n}","import { createContext, useReducer } from \"react\";\nimport {reducer} from './reducer';\n\nexport const ShopContext = createContext();\n\nconst initialState = {\n    goods: [],\n    loading: true,\n    order: [],\n    isCartShow: false,\n    alertName: ''\n};\n\nexport const ContextProvider = ({children}) => {\n    const [value, dispatch] = useReducer(reducer, initialState);\n\n    value.closeAlert = () => {\n        dispatch({type: 'CLOSE_ALERT'})\n    };\n\n    value.removeFromCart = (itemId) => {\n        dispatch({type: 'REMOVE_FROM_CART', payload: {id: itemId}})\n    };\n\n    value.handleCartShow = () => {\n        dispatch({type: 'TOGGLE_CART_SHOW'})\n    };\n\n    value.addToCart = (item) => {\n        dispatch({type: 'ADD_TO_CART', payload: item})\n    };\n\n    value.changeQuantityItem = (itemId, n) => {\n        dispatch({type: 'CHANGE_QUANTITY_ITEM', payload: {id: itemId, n: n}})\n    };\n\n    value.setGoods = (data) => {\n        dispatch({type: 'SET_GOODS', payload: data})\n    }\n\n    return (\n        <ShopContext.Provider value={value}>\n            {children}\n        </ShopContext.Provider>\n    )\n};","function Preloader() {\n    return (\n        <div className=\"progress\">\n                <div className=\"indeterminate\"></div>\n        </div>\n    );\n}\n\nexport {Preloader};","import { useContext } from 'react';\nimport { ShopContext } from '../context';\n\nfunction GoodsItem(props) {\n    const {\n        mainId : id,\n        displayName : name,\n        displayDescription : description,\n        price : {\n            regularPrice : price,\n        },\n        displayAssets : [{\n            full_background : preview\n        }],\n    } = props;\n\n    const {addToCart} = useContext(ShopContext);\n\n    return (\n        <div className=\"card\">\n            <div className=\"card-image\">\n                <img src={preview} alt={name}/>\n            </div>\n            <div className=\"card-content\">\n            <span className=\"card-title\">{name}</span>\n            <p>{description}</p>\n            </div>\n            <div className=\"card-action\">\n                <button className=\"btn\"\n                        onClick={() =>\n                            addToCart({\n                                id,\n                                name,\n                                price,\n                                preview\n                            })\n                    }>Купить\n                </button>\n                <span className=\"right price\">{price} V</span>\n            </div>\n        </div>\n    );\n}\n\nexport {GoodsItem};","import { useContext } from 'react';\nimport { ShopContext } from '../context';\nimport {GoodsItem} from './GoodsItem';\n\nfunction GoodsList() {\n    const {goods = []} = useContext(ShopContext);\n\n    if (!goods.length ) {\n        return (\n            <h3>Nothing here</h3>\n        );\n    }\n\n    return (\n        <div className=\"goods-list\">\n            {goods.map(item => (\n                <GoodsItem key={item.mainId} {...item} />\n            )).slice(0,12)}\n        </div>\n    );\n\n}\n\nexport {GoodsList};","import {useContext} from 'react';\nimport {ShopContext} from '../context';\n\nfunction Cart() {\n    const {order, handleCartShow = Function.prototype} = useContext(ShopContext);\n    const quantity = order.length;\n\n    return (\n        <div\n            className=\"cart #009688 teal white-text\"\n            onClick={handleCartShow}\n        >\n            <i className=\"material-icons cart-icon\">shopping_cart</i>\n            { quantity ? (\n                <span className=\"cart-quantity\">{quantity}</span> ) : (\n                null\n            )}\n        </div>\n    );\n}\n\nexport {Cart};","import {useContext} from 'react';\nimport {ShopContext} from '../context';\n\nfunction CartItem(props) {\n    const {\n        id,\n        name,\n        price,\n        quantity,\n        preview,\n    } = props;\n\n    const {removeFromCart, changeQuantityItem} = useContext(ShopContext);\n\n    return (\n        <li className=\"collection-item cart-list-item\">\n            <div className=\"list-item-wrap\">\n                <div className=\"cart-list-img\">\n                    <img src={preview} alt={name} />\n                </div>\n                {\n                    quantity ? (\n                        <div>\n                            {name} x {quantity} = {price * quantity} V\n                        </div>\n                    ) : (\n                        <div className=\"deep-orange-text text-darken-3\">\n                            {name} x {quantity} = {price * quantity} V (Нулевое количество товара. Добавьте количество или удалите товар из корзины)\n                        </div>\n                    )\n                }\n            </div>\n            <div className=\"control-list-item\">\n                <div className=\"change-quantity-wrap\">\n                    <button className=\"change-quantity-item\" onClick={() => changeQuantityItem(id, 1)}>+</button>\n                    <button className=\"change-quantity-item\" onClick={() => changeQuantityItem(id, -1)}>-</button>\n                </div>\n                <span className=\"secondary-content\" onClick={() => removeFromCart(id)}>\n                    <i className=\"material-icons\">remove_shopping_cart</i>\n                </span>\n            </div>\n        </li>\n    )\n}\n\nexport {CartItem};","import {useContext} from 'react';\nimport {ShopContext} from '../context';\nimport {CartItem} from './CartItem';\n\nfunction CartList() {\n    const {\n        order = [],\n        handleCartShow = Function.prototype\n    } = useContext(ShopContext);\n\n    const totalPrice = order.reduce((sum, el) => {\n        return sum + el.price * el.quantity;\n    }, 0);\n\n    return (\n        <ul className=\"collection cart-list\">\n            <li className=\"collection-item active cart-list-item\">Корзина\n                <i className=\"material-icons\" onClick={handleCartShow}>close</i>\n            </li>\n            {\n                order.length ? (\n                    order.map(item => (\n                        <CartItem\n                            key={item.id}\n                            {...item}\n                        />\n                    ))) : (\n                        <li className=\"collection-item\">\n                            Корзина пуста\n                        </li>\n                    )\n            }\n            <li className=\"collection-item active cart-list-item\">\n                Общая стоимость: {totalPrice} V\n                <button className=\"secondary-content btn indigo lighten-2\">Оформить заказ</button>\n            </li>\n        </ul>\n    )\n}\n\nexport {CartList};","import {useContext, useEffect} from 'react';\nimport {ShopContext} from '../context';\n\nfunction Alert() {\n    const {alertName, closeAlert = Function.prototype} = useContext(ShopContext);\n\n    useEffect(() => {\n        const timerId = setTimeout(closeAlert, 3000);\n\n        return () => {\n            clearTimeout(timerId);\n        }\n        // eslint-disable-next-line\n    }, [alertName]);\n\n    return (\n        <div id=\"toast-container\">\n            <div className=\"toast\">{alertName} добавлен в корзину</div>\n        </div>\n    );\n}\n\nexport {Alert};","import { useEffect, useContext } from 'react';\nimport {API_KEY, API_URL} from '../config';\n\nimport { ShopContext } from '../context';\n\nimport {Preloader} from './Preloader';\nimport {GoodsList} from './GoodsList';\nimport {Cart} from './Cart';\nimport {CartList} from './CartList';\nimport {Alert} from './Alert';\n\n\nfunction Main() {\n    const {\n        loading,\n        order,\n        isCartShow,\n        alertName,\n        setGoods\n    } = useContext(ShopContext);\n\n    useEffect(function getGoods() {\n        fetch(API_URL, {\n                headers: {\n                    Authorization: API_KEY,\n                }\n            })\n        .then(response => response.json())\n        .then(data => {\n            setGoods(data.shop);\n        })\n        // eslint-disable-next-line\n    }, []);\n\n    if (document.querySelector('.goods-list')) {\n        if (isCartShow) {\n            document.body.style.overflow='hidden';\n            document.querySelector('.goods-list').style.webkitFilter = 'blur(10px)';\n        } else {\n            document.body.style.overflow='';\n            document.querySelector('.goods-list').style.webkitFilter = '';\n        }\n    }\n\n    return (\n        <main className=\"container\">\n            <Cart quantity={order.length} />\n            {loading ? <Preloader /> : <GoodsList /> }\n            { isCartShow && <CartList /> }\n            { alertName && <Alert /> }\n        </main>\n    );\n}\n\nexport {Main};","function Footer() {\n    return <footer className=\"page-footer indigo lighten-3\">\n        <div className=\"footer-copyright indigo lighten-3\">\n            <div className=\"container\">\n                © {new Date().getFullYear()} Copyright Text\n                <a className=\"grey-text text-lighten-4 right\" href=\"https://github.com/Anton-Sidko/ReactShop\">Repo</a>\n            </div>\n        </div>\n    </footer>\n}\n\nexport {Footer}","import {Header} from './components/Header';\nimport {Main} from './components/Main';\nimport {Footer} from './components/Footer';\n\nimport {ContextProvider} from './context';\n\n\nfunction App() {\n  return (\n    <>\n      <Header />\n      <ContextProvider>\n        <Main />\n      </ContextProvider>\n      <Footer />\n    </>\n\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}